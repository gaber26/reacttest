(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{211:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},234:function(e,t,n){},261:function(e,t){},328:function(e,t,n){},330:function(e,t,n){},332:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(24),c=n.n(s),o=n(193),r=n(141),l=n(183),u=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):r.b)(Object(r.a)(l.a)),h=Object(r.c)(u),d=(n(211),n(212),n(133)),p=n(75),j=(n(213),n(52)),b=n(53),m=n(58),O=n(55),f=(n.p,n(214),n(345)),v=n(337),x=n(7),k=function(e){Object(m.a)(n,e);var t=Object(O.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(x.jsxs)("div",{children:[Object(x.jsx)(f.a,{message:"\u65e5\u5386",type:"success",style:{marginBottom:20,fontSize:22,textAlign:"center"}}),Object(x.jsx)(v.a,{onPanelChange:function(){return e.onPanelChange}})]})}},{key:"onPanelChange",value:function(e,t){console.log(e.format("YYYY-MM-DD"),t)}}]),n}(i.a.Component),g=n(106),y=(n(234),n(32)),C=function(e){Object(m.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={},a}return Object(b.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return e.content!==this.props.content}},{key:"render",value:function(){var e=this;return Object(x.jsxs)("li",{className:"li",children:[this.props.content.name," - ",this.props.content.author," - ",this.props.content.publish," - ",this.props.content.price," - ",this.props.pages,Object(x.jsx)(y.a,{className:"delete",value:"small",type:"danger",onClick:function(){e.props.delItem()},children:"\u5220\u9664"})]})}}]),n}(a.Component);C.defaultProps={pages:100};var D=C,S=n(187),T=n.n(S),E=n(154),w=n.n(E),I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;return new Promise((function(c,o){var r={method:n,url:e,headers:{Accept:"application/json","Content-Type":a||"application/json"},timeout:i||18e4,responseType:s||"json"};switch(n.toUpperCase()){case"GET":r.params=t,r.paramsSerializer=function(e){return w.a.stringify(e,{indices:!1})};break;case"DELETE":r.params=t;break;case"POST":case"PUT":r.data=t;break;default:r.data=t}"POST"!==n&&"PUT"!==n||"multipart/form-data"===a||(r.data=a?w.a.stringify(t):JSON.stringify(t)),T()(r).then((function(e){e&&c(e)})).catch((function(e){o(e)}))}))},N="http://39.103.176.82:8181",B=function(e){return I("".concat(N,"/book/save"),e,"POST")},M=n(344),_=n(342),P=n(339),z=n(340),A=n(200),U={labelCol:{span:2},wrapperCol:{span:16}},F={wrapperCol:{offset:2,span:16}},V=function(e){Object(m.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={list:[]},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(x.jsxs)(a.Fragment,{children:[Object(x.jsx)("div",{children:Object(x.jsxs)(P.a,Object(g.a)(Object(g.a)({},U),{},{name:"basic",initialValues:{remember:!0},ref:"form",onFinish:function(t){return e.onAdd(t)},onFinishFailed:this.onFinishFailed,children:[Object(x.jsx)(P.a.Item,{label:"\u4e66\u540d",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}],children:Object(x.jsx)(z.a,{})}),Object(x.jsx)(P.a.Item,{label:"\u4f5c\u8005",name:"author",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f5c\u8005"}],children:Object(x.jsx)(z.a,{})}),Object(x.jsx)(P.a.Item,{label:"\u51fa\u7248\u793e",name:"publish",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u51fa\u7248\u793e"}],children:Object(x.jsx)(z.a,{})}),Object(x.jsx)(P.a.Item,{label:"\u4ef7\u683c",name:"price",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4ef7\u683c"}],children:Object(x.jsx)(z.a,{})}),Object(x.jsx)(P.a.Item,{name:"content",label:"\u5185\u5bb9",children:Object(x.jsx)(z.a.TextArea,{rows:10})}),Object(x.jsx)(P.a.Item,Object(g.a)(Object(g.a)({},F),{},{children:Object(x.jsx)(y.a,{type:"primary",htmlType:"submit",children:"\u65b0\u589e"})}))]}))}),Object(x.jsx)("ul",{children:Object(x.jsx)(M.a,{children:this.state.list.map((function(t,n){return Object(x.jsx)(_.a,{timeout:10,unmountOnExit:!0,appear:!0,children:Object(x.jsx)(D,{content:t,index:n,delItem:function(){e.delItem(n)}},n)},n)}))})})]})}},{key:"componentDidUpdate",value:function(){console.log("componentDidUpdate-----\u6240\u6709\u6302\u8f7d\u5b8c\u6bd5\u6267\u884c   4")}},{key:"componentDidMount",value:function(){console.log("componentDidMount-----\u7ec4\u4ef6\u5df2\u7ecf\u6302\u8f7d\u5230\u9875\u9762\u7684\u65f6\u5019")}},{key:"onAdd",value:function(e){this.state.list.push(e),this.getAdd(e),this.setState({list:this.state.list}),e&&this.refs.form.resetFields()}},{key:"getAdd",value:function(e){var t=this;B(e).then((function(e){200==e.status&&(A.b.success("\u65b0\u589e\u6210\u529f"),setTimeout((function(){t.props.history.push("/book")}),1e3))}))}},{key:"onFinishFailed",value:function(e){console.log("Failed:",e)}},{key:"delItem",value:function(e){var t=this.state.list;t.splice(e,1),this.setState({list:t})}}]),n}(a.Component),J=n(155),q=n.n(J),G=n(189),L=(n(328),n(343)),X=n(336),Y=n(341),Q=n(98),R=n(50),K=z.a.Search,W=function(e){console.log(e)},H=function(e){Object(m.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={dataSource:[],current:1,size:10,total:0,loading:!1,showQuickJumper:!0,isModalVisible:!1,setIsModalVisible:!1,columns:[{title:"ID",dataIndex:"id",key:"id"},{title:"\u4e66\u540d",dataIndex:"name",key:"name",render:function(e,t){return Object(x.jsx)("div",{children:Object(x.jsx)("span",{className:"edit",onClick:function(){return a.handleDetail(t.id)},children:Object(x.jsx)("a",{children:t.name})})})}},{title:"\u4f5c\u8005",dataIndex:"author",key:"author"},{title:"\u51fa\u7248\u793e",dataIndex:"publish",key:"publish"},{title:"\u4ef7\u683c",dataIndex:"price",key:"price"},{title:"\u64cd\u4f5c",dataIndex:"operation",render:function(e,t){return Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{className:"edit",onClick:function(){return a.handleEdit(t)},children:Object(x.jsx)("a",{children:"\u7f16\u8f91"})}),Object(x.jsx)(L.a,{title:"\u786e\u5b9a\u5220\u9664\u5417?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onConfirm:function(){return a.handleDelete(t.id)},children:Object(x.jsx)("a",{children:"\u5220\u9664"})})]})}}],id:"",name:"",author:"",publish:"",price:"",title:"\u65b0\u589e"},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"search",children:[Object(x.jsx)(K,{placeholder:"\u8bf7\u8f93\u5165\u4e66\u540d",allowClear:!0,enterButton:"\u641c\u7d22",onSearch:W}),Object(x.jsx)(y.a,{className:"btn",type:"primary",onClick:function(){return e.handleAdd()},children:"\u65b0\u589e"})]}),Object(x.jsx)(X.a,{rowKey:"id",loading:this.state.loading,bordered:!0,dataSource:this.state.dataSource,columns:this.state.columns,pagination:this.fenye()}),Object(x.jsxs)(Y.a,{okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",title:this.state.title,visible:this.state.isModalVisible,onOk:function(){return e.handleOk()},onCancel:function(){return e.handleCancel()},children:[Object(x.jsxs)(Q.a,{className:"row",children:[Object(x.jsx)(R.a,{span:4,children:"\u4e66\u540d"}),Object(x.jsx)(R.a,{span:16,children:Object(x.jsx)(z.a,{placeholder:"\u4e66\u540d",value:this.state.name,onChange:function(){return e.nameChange(event)}})})]}),Object(x.jsxs)(Q.a,{className:"row",children:[Object(x.jsx)(R.a,{span:4,children:"\u4f5c\u8005"}),Object(x.jsx)(R.a,{span:16,children:Object(x.jsx)(z.a,{placeholder:"\u4f5c\u8005",value:this.state.author,onChange:function(){return e.authorChange(event)}})})]}),Object(x.jsxs)(Q.a,{className:"row",children:[Object(x.jsx)(R.a,{span:4,children:"\u51fa\u7248\u793e"}),Object(x.jsx)(R.a,{span:16,children:Object(x.jsx)(z.a,{placeholder:"\u51fa\u7248\u793e",value:this.state.publish,onChange:function(){return e.publishChange(event)}})})]}),Object(x.jsxs)(Q.a,{className:"row",children:[Object(x.jsx)(R.a,{span:4,children:"\u4ef7\u683c"}),Object(x.jsx)(R.a,{span:16,children:Object(x.jsx)(z.a,{placeholder:"\u4ef7\u683c",value:this.state.price,onChange:function(){return e.priceChange(event)}})})]})]})]})}},{key:"componentDidMount",value:function(){console.log("componentDidMount-----\u7ec4\u4ef6\u5df2\u7ecf\u6302\u8f7d\u5230\u9875\u9762\u7684\u65f6\u5019"),this.getBook(this.state.current,this.state.size)}},{key:"fenye",value:function(){var e=this;return{current:this.state.current,pageSize:this.state.size,total:this.state.total,onChange:function(t){e.setState({current:t}),e.getBook(t,10)},onShowSizeChange:function(t,n){console.log(n),e.getBook(t,n)},showQuickJumper:this.state.showQuickJumper}}},{key:"getBook",value:function(){var e=Object(G.a)(q.a.mark((function e(t,n){var a;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,i={current:t,size:n},I("".concat(N,"/book/findAll/").concat(i.current,"/").concat(i.size),{},"GET");case 3:a=e.sent,console.log("\u5217\u8868",a.data.content),a.data.content.length&&this.setState({loading:!1,dataSource:a.data.content,total:a.data.totalElements});case 6:case"end":return e.stop()}var i}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleDelete",value:function(e){this.getBookDeletel(e)}},{key:"getBookDeletel",value:function(e){var t=this;(function(e){return I("".concat(N,"/book/deleteById/").concat(e),{},"DELETE")})(e).then((function(e){200==e.status&&(A.b.warning("\u5220\u9664\u6210\u529f"),t.getBook(t.state.current,t.state.size))}))}},{key:"handleAdd",value:function(){this.setState({isModalVisible:!0,title:"\u65b0\u589e"})}},{key:"getAdd",value:function(e){var t=this;B(e).then((function(e){200==e.status&&(A.b.success("\u65b0\u589e\u6210\u529f"),t.getBook(t.state.current,t.state.size))}))}},{key:"handleDetail",value:function(e){this.props.history.push({pathname:"/bookDetail",state:{id:e}})}},{key:"handleEdit",value:function(e){this.setState({isModalVisible:!0,title:"\u7f16\u8f91",id:e.id,name:e.name,author:e.author,publish:e.publish,price:e.price})}},{key:"getBookUpdate",value:function(e){var t=this;(function(e){return I("".concat(N,"/book/update"),e,"PUT")})(e).then((function(e){200==e.status&&(A.b.success("\u4fee\u6539\u6210\u529f"),t.getBook(t.state.current,t.state.size))}))}},{key:"nameChange",value:function(e){this.setState({name:e.target.value})}},{key:"authorChange",value:function(e){this.setState({author:e.target.value})}},{key:"publishChange",value:function(e){this.setState({publish:e.target.value})}},{key:"priceChange",value:function(e){this.setState({price:e.target.value})}},{key:"handleOk",value:function(){if(this.setState({isModalVisible:!1}),this.state.id){var e={id:this.state.id,name:this.state.name,author:this.state.author,publish:this.state.publish,price:this.state.price};this.getBookUpdate(e)}else{var t={name:this.state.name,author:this.state.author,publish:this.state.publish,price:this.state.price};this.getAdd(t)}}},{key:"handleCancel",value:function(){this.setState({isModalVisible:!1,id:"",name:"",author:"",publish:"",price:""})}}]),n}(i.a.Component),Z=(n(330),n(338)),$=function(e){Object(m.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={bookDetail:{name:"",author:"",publish:"",price:""}},a}return Object(b.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)(f.a,{message:"\u4e66\u540d\uff1a",description:this.state.bookDetail.name,type:"success"}),Object(x.jsxs)(Z.a,{title:"\u8be6\u60c5\u4fe1\u606f",style:{marginTop:20},children:[Object(x.jsxs)("p",{children:["\u4e66\u540d\uff1a ",this.state.bookDetail.name]}),Object(x.jsxs)("p",{children:["\u4f5c\u8005\uff1a ",this.state.bookDetail.author]}),Object(x.jsxs)("p",{children:["\u51fa\u7248\u793e\uff1a ",this.state.bookDetail.publish]}),Object(x.jsxs)("p",{children:["\u4ef7\u683c\uff1a ",this.state.bookDetail.price]})]}),Object(x.jsx)(Z.a,{title:"\u6587\u7ae0\u5185\u5bb9",style:{marginTop:20},children:Object(x.jsxs)("p",{children:[" ",this.state.bookDetail.content]})})]})}},{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){if(console.log("componentDidMount-----\u7ec4\u4ef6\u5df2\u7ecf\u6302\u8f7d\u5230\u9875\u9762\u7684\u65f6\u5019"),this.props.location.state){var e=this.props.location.state.id;this.getBookDetail(e)}}},{key:"getBookDetail",value:function(e){var t=this;(function(e){return I("".concat(N,"/book/findById/").concat(e),{},"GET")})(e).then((function(e){var n=e.data;"object"==typeof n&&t.setState({bookDetail:n})}))}}]),n}(i.a.Component),ee=function(){var e=[{title:"\u9996\u9875",path:"/",exact:!0,component:k},{title:"\u7ec3\u4e60",path:"/practice",exact:!0,component:V},{title:"\u4e66\u7c4d\u5217\u8868",path:"/book",exact:!0,component:H},{title:"\u4e66\u7c4d\u8be6\u60c5",path:"/bookDetail",exact:!0,component:$}];return Object(x.jsx)(d.a,{children:Object(x.jsxs)("div",{className:"layout",children:[Object(x.jsx)("div",{className:"sideBar",children:Object(x.jsx)("ul",{children:e.map((function(e,t){return Object(x.jsx)("li",{children:Object(x.jsx)(d.b,{to:e.path,children:e.title})},t)}))})}),Object(x.jsxs)("div",{className:"main-box",children:[Object(x.jsx)("div",{className:"header",children:"\u5934\u90e8"}),Object(x.jsx)("div",{className:"main-content",children:e.map((function(e,t){return Object(x.jsx)(p.a,{path:e.path,exact:e.exact,component:e.component},t)}))})]})]})})};c.a.render(Object(x.jsx)(o.a,{store:h,children:Object(x.jsx)(ee,{})}),document.getElementById("root"))}},[[332,1,2]]]);
//# sourceMappingURL=main.18753d95.chunk.js.map