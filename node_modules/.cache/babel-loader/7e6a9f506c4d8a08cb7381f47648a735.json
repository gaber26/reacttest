{"ast":null,"code":"import _regeneratorRuntime from\"/Users/gaber/Documents/\\u7EC3\\u4E60/project2/reacttest/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/gaber/Documents/\\u7EC3\\u4E60/project2/reacttest/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/gaber/Documents/\\u7EC3\\u4E60/project2/reacttest/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/gaber/Documents/\\u7EC3\\u4E60/project2/reacttest/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/gaber/Documents/\\u7EC3\\u4E60/project2/reacttest/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/gaber/Documents/\\u7EC3\\u4E60/project2/reacttest/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import\"./index.css\";import React from\"react\";import{articleList,articleAdd,articleUpdate,articleDelete}from\"../../lib/api\";import{Table,Input,Modal,Popconfirm,Row,Col,Button,message}from\"antd\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=Input.Search;var onSearch=function onSearch(value){console.log(value);};var Index=/*#__PURE__*/function(_React$Component){_inherits(Index,_React$Component);var _super=_createSuper(Index);// 类名  继承  react组件\nfunction Index(props){var _this;_classCallCheck(this,Index);// 构造\n_this=_super.call(this,props);// 调用父级方法\n_this.state={dataSource:[],current:1,// 当前页\nsize:10,// 每页显示\ntotal:0,// 总条数\nloading:false,showQuickJumper:true,//是否点击跳转\nisModalVisible:false,setIsModalVisible:false,columns:[{title:\"ID\",dataIndex:\"id\",key:\"id\"},{title:\"书名\",dataIndex:\"name\",key:\"name\",render:function render(_,record){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"edit\",onClick:function onClick(){return _this.handleDetail(record.id);},children:/*#__PURE__*/_jsx(\"a\",{children:record.name})})});}},{title:\"作者\",dataIndex:\"author\",key:\"author\"},{title:\"出版社\",dataIndex:\"publish\",key:\"publish\"},{title:\"价格\",dataIndex:\"price\",key:\"price\"},{title:\"操作\",dataIndex:\"operation\",render:function render(_,record){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"edit\",onClick:function onClick(){return _this.handleEdit(record);},children:/*#__PURE__*/_jsx(\"a\",{children:\"\\u7F16\\u8F91\"})}),/*#__PURE__*/_jsx(Popconfirm,{title:\"\\u786E\\u5B9A\\u5220\\u9664\\u5417?\",okText:\"\\u786E\\u8BA4\",cancelText:\"\\u53D6\\u6D88\",onConfirm:function onConfirm(){return _this.handleDelete(record.id);},children:/*#__PURE__*/_jsx(\"a\",{children:\"\\u5220\\u9664\"})})]});}}],//编辑\nid:\"\",name:\"\",author:\"\",publish:\"\",price:\"\",//公共\ntitle:\"新增\"};return _this;}_createClass(Index,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search\",children:[/*#__PURE__*/_jsx(Search,{placeholder:\"\\u8BF7\\u8F93\\u5165\\u4E66\\u540D\",allowClear:true,enterButton:\"\\u641C\\u7D22\",onSearch:onSearch}),/*#__PURE__*/_jsx(Button,{className:\"btn\",type:\"primary\",onClick:function onClick(){return _this2.handleAdd();},children:\"\\u65B0\\u589E\"})]}),/*#__PURE__*/_jsx(Table,{rowKey:\"id\",loading:this.state.loading,bordered:true,dataSource:this.state.dataSource,columns:this.state.columns,pagination:this.fenye()}),/*#__PURE__*/_jsxs(Modal,{okText:\"\\u786E\\u8BA4\",cancelText:\"\\u53D6\\u6D88\",title:this.state.title,visible:this.state.isModalVisible,onOk:function onOk(){return _this2.handleOk();},onCancel:function onCancel(){return _this2.handleCancel();},children:[/*#__PURE__*/_jsxs(Row,{className:\"row\",children:[/*#__PURE__*/_jsx(Col,{span:4,children:\"\\u4E66\\u540D\"}),/*#__PURE__*/_jsx(Col,{span:16,children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u4E66\\u540D\",value:this.state.name,onChange:function onChange(){return _this2.nameChange(event);}})})]}),/*#__PURE__*/_jsxs(Row,{className:\"row\",children:[/*#__PURE__*/_jsx(Col,{span:4,children:\"\\u4F5C\\u8005\"}),/*#__PURE__*/_jsx(Col,{span:16,children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u4F5C\\u8005\",value:this.state.author,onChange:function onChange(){return _this2.authorChange(event);}})})]}),/*#__PURE__*/_jsxs(Row,{className:\"row\",children:[/*#__PURE__*/_jsx(Col,{span:4,children:\"\\u51FA\\u7248\\u793E\"}),/*#__PURE__*/_jsx(Col,{span:16,children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u51FA\\u7248\\u793E\",value:this.state.publish,onChange:function onChange(){return _this2.publishChange(event);}})})]}),/*#__PURE__*/_jsxs(Row,{className:\"row\",children:[/*#__PURE__*/_jsx(Col,{span:4,children:\"\\u4EF7\\u683C\"}),/*#__PURE__*/_jsx(Col,{span:16,children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u4EF7\\u683C\",value:this.state.price,onChange:function onChange(){return _this2.priceChange(event);}})})]})]})]});}},{key:\"componentDidMount\",value:function componentDidMount(){console.log(\"componentDidMount-----组件已经挂载到页面的时候\");this.getBook(this.state.current,this.state.size);//获取列表接口\n}//分页\n},{key:\"fenye\",value:function fenye(){var _this3=this;var fy={current:this.state.current,// 当前页\npageSize:this.state.size,// 每页显示\ntotal:this.state.total,// 总条数\nonChange:function onChange(current){// 点击下一页\n_this3.setState({current:current});_this3.getBook(current,10);},// 每页显示变化\nonShowSizeChange:function onShowSizeChange(Current,pageSize){console.log(pageSize);_this3.getBook(Current,pageSize);},showQuickJumper:this.state.showQuickJumper//是否可以跳转\n};return fy;}//列表接口\n},{key:\"getBook\",value:function(){var _getBook=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(current,size){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.setState({loading:true});_context.next=3;return articleList({current:current,size:size});case 3:res=_context.sent;console.log(\"列表\",res.data.content);if(res.data.content.length){this.setState({loading:false,dataSource:res.data.content,total:res.data.totalElements});}case 6:case\"end\":return _context.stop();}}},_callee,this);}));function getBook(_x,_x2){return _getBook.apply(this,arguments);}return getBook;}()/**\n   * 删除模块\n   */},{key:\"handleDelete\",value:function handleDelete(key){this.getBookDeletel(key);}//删除接口\n},{key:\"getBookDeletel\",value:function getBookDeletel(id){var _this4=this;articleDelete(id).then(function(res){if(res.status==200){message.warning(\"删除成功\");_this4.getBook(_this4.state.current,_this4.state.size);//获取列表接口\n}});}/**\n   * 新增模块\n   */},{key:\"handleAdd\",value:function handleAdd(){this.setState({isModalVisible:true,title:\"新增\"});}//新增接口\n},{key:\"getAdd\",value:function getAdd(data){var _this5=this;articleAdd(data).then(function(res){if(res.status==200){message.success(\"新增成功\");_this5.getBook(_this5.state.current,_this5.state.size);//获取列表接口\n}});}/**\n   * 详情模块\n   */},{key:\"handleDetail\",value:function handleDetail(id){this.props.history.push({pathname:\"/bookDetail\",state:{id:id}});}/**\n   * 编辑模块\n   */},{key:\"handleEdit\",value:function handleEdit(key){this.setState({isModalVisible:true,title:\"编辑\",id:key.id,name:key.name,author:key.author,publish:key.publish,price:key.price});}/**\n   * 弹出框模块\n   */},{key:\"getBookUpdate\",value:function getBookUpdate(data){var _this6=this;articleUpdate(data).then(function(res){if(res.status==200){message.success(\"修改成功\");_this6.getBook(_this6.state.current,_this6.state.size);//获取列表接口\n}});}},{key:\"nameChange\",value:function nameChange(event){this.setState({name:event.target.value});}},{key:\"authorChange\",value:function authorChange(event){this.setState({author:event.target.value});}},{key:\"publishChange\",value:function publishChange(event){this.setState({publish:event.target.value});}},{key:\"priceChange\",value:function priceChange(event){this.setState({price:event.target.value});}//弹出框确定\n},{key:\"handleOk\",value:function handleOk(){this.setState({isModalVisible:false});if(this.state.id){var data={id:this.state.id,name:this.state.name,author:this.state.author,publish:this.state.publish,price:this.state.price};this.getBookUpdate(data);}else{var _data={name:this.state.name,author:this.state.author,publish:this.state.publish,price:this.state.price};this.getAdd(_data);}}//弹出框取消\n},{key:\"handleCancel\",value:function handleCancel(){this.setState({isModalVisible:false,id:\"\",name:\"\",author:\"\",publish:\"\",price:\"\"});}}]);return Index;}(React.Component);export default Index;","map":{"version":3,"sources":["/Users/gaber/Documents/练习/project2/reacttest/src/pages/book/index.js"],"names":["React","articleList","articleAdd","articleUpdate","articleDelete","Table","Input","Modal","Popconfirm","Row","Col","Button","message","Search","onSearch","value","console","log","Index","props","state","dataSource","current","size","total","loading","showQuickJumper","isModalVisible","setIsModalVisible","columns","title","dataIndex","key","render","_","record","handleDetail","id","name","handleEdit","handleDelete","author","publish","price","handleAdd","fenye","handleOk","handleCancel","nameChange","event","authorChange","publishChange","priceChange","getBook","fy","pageSize","onChange","setState","onShowSizeChange","Current","res","data","content","length","totalElements","getBookDeletel","then","status","warning","success","history","push","pathname","target","getBookUpdate","getAdd","Component"],"mappings":"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","sourcesContent":["import \"./index.css\";\nimport React from \"react\";\nimport { articleList, articleAdd, articleUpdate, articleDelete } from \"../../lib/api\";\nimport { Table, Input, Modal, Popconfirm, Row, Col, Button, message } from \"antd\";\nconst { Search } = Input;\n\nconst onSearch = (value) => {\n  console.log(value);\n};\nclass Index extends React.Component {\n  // 类名  继承  react组件\n  constructor(props) {\n    // 构造\n    super(props); // 调用父级方法\n    this.state = {\n      dataSource: [],\n      current: 1, // 当前页\n      size: 10, // 每页显示\n      total: 0, // 总条数\n      loading: false,\n      showQuickJumper: true, //是否点击跳转\n      isModalVisible: false,\n      setIsModalVisible: false,\n      columns: [\n        {\n          title: \"ID\",\n          dataIndex: \"id\",\n          key: \"id\",\n        },\n        {\n          title: \"书名\",\n          dataIndex: \"name\",\n          key: \"name\",\n          render: (_, record) => (\n            <div>\n              <span className=\"edit\" onClick={() => this.handleDetail(record.id)}>\n                <a>{record.name}</a>\n              </span>\n            </div>\n          ),\n        },\n        {\n          title: \"作者\",\n          dataIndex: \"author\",\n          key: \"author\",\n        },\n        {\n          title: \"出版社\",\n          dataIndex: \"publish\",\n          key: \"publish\",\n        },\n        {\n          title: \"价格\",\n          dataIndex: \"price\",\n          key: \"price\",\n        },\n        {\n          title: \"操作\",\n          dataIndex: \"operation\",\n          render: (_, record) => (\n            <div>\n              <span className=\"edit\" onClick={() => this.handleEdit(record)}>\n                <a>编辑</a>\n              </span>\n              <Popconfirm title=\"确定删除吗?\" okText=\"确认\" cancelText=\"取消\" onConfirm={() => this.handleDelete(record.id)}>\n                <a>删除</a>\n              </Popconfirm>\n            </div>\n          ),\n        },\n      ],\n      //编辑\n      id: \"\",\n      name: \"\",\n      author: \"\",\n      publish: \"\",\n      price: \"\",\n      //公共\n      title: \"新增\",\n    };\n  }\n  render() {\n    return (\n      <div>\n        {/* 表头 */}\n        <div className=\"search\">\n          <Search placeholder=\"请输入书名\" allowClear enterButton=\"搜索\" onSearch={onSearch} />\n          <Button className=\"btn\" type=\"primary\" onClick={() => this.handleAdd()}>\n            新增\n          </Button>\n        </div>\n        <Table rowKey=\"id\" loading={this.state.loading} bordered dataSource={this.state.dataSource} columns={this.state.columns} pagination={this.fenye()} />\n\n        <Modal okText=\"确认\" cancelText=\"取消\" title={this.state.title} visible={this.state.isModalVisible} onOk={() => this.handleOk()} onCancel={() => this.handleCancel()}>\n          <Row className=\"row\">\n            <Col span={4}>书名</Col>\n            <Col span={16}>\n              <Input placeholder=\"书名\" value={this.state.name} onChange={() => this.nameChange(event)} />\n            </Col>\n          </Row>\n          <Row className=\"row\">\n            <Col span={4}>作者</Col>\n            <Col span={16}>\n              <Input placeholder=\"作者\" value={this.state.author} onChange={() => this.authorChange(event)} />\n            </Col>\n          </Row>\n          <Row className=\"row\">\n            <Col span={4}>出版社</Col>\n            <Col span={16}>\n              <Input placeholder=\"出版社\" value={this.state.publish} onChange={() => this.publishChange(event)} />\n            </Col>\n          </Row>\n          <Row className=\"row\">\n            <Col span={4}>价格</Col>\n            <Col span={16}>\n              <Input placeholder=\"价格\" value={this.state.price} onChange={() => this.priceChange(event)} />\n            </Col>\n          </Row>\n        </Modal>\n      </div>\n    );\n  }\n  componentDidMount() {\n    console.log(\"componentDidMount-----组件已经挂载到页面的时候\");\n    this.getBook(this.state.current, this.state.size); //获取列表接口\n  }\n  //分页\n  fenye() {\n    const fy = {\n      current: this.state.current, // 当前页\n      pageSize: this.state.size, // 每页显示\n      total: this.state.total, // 总条数\n      onChange: (current) => {\n        // 点击下一页\n        this.setState({\n          current: current,\n        });\n        this.getBook(current, 10);\n      },\n      // 每页显示变化\n      onShowSizeChange: (Current, pageSize) => {\n        console.log(pageSize);\n        this.getBook(Current, pageSize);\n      },\n      showQuickJumper: this.state.showQuickJumper, //是否可以跳转\n    };\n    return fy;\n  }\n  //列表接口\n  async getBook(current, size) {\n    this.setState({ loading: true });\n    let res = await articleList({ current: current, size: size });\n    console.log(\"列表\", res.data.content);\n    if (res.data.content.length) {\n      this.setState({\n        loading: false,\n        dataSource: res.data.content,\n        total: res.data.totalElements,\n      });\n    }\n  }\n  /**\n   * 删除模块\n   */\n  handleDelete(key) {\n    this.getBookDeletel(key);\n  }\n  //删除接口\n  getBookDeletel(id) {\n    articleDelete(id).then((res) => {\n      if (res.status == 200) {\n        message.warning(\"删除成功\");\n        this.getBook(this.state.current, this.state.size); //获取列表接口\n      }\n    });\n  }\n  /**\n   * 新增模块\n   */\n  handleAdd() {\n    this.setState({\n      isModalVisible: true,\n      title: \"新增\",\n    });\n  }\n  //新增接口\n  getAdd(data) {\n    articleAdd(data).then((res) => {\n      if (res.status == 200) {\n        message.success(\"新增成功\");\n        this.getBook(this.state.current, this.state.size); //获取列表接口\n      }\n    });\n  }\n  /**\n   * 详情模块\n   */\n  handleDetail(id) {\n    this.props.history.push({ pathname: `/bookDetail`, state: { id: id } });\n  }\n  /**\n   * 编辑模块\n   */\n  handleEdit(key) {\n    this.setState({\n      isModalVisible: true,\n      title: \"编辑\",\n      id: key.id,\n      name: key.name,\n      author: key.author,\n      publish: key.publish,\n      price: key.price,\n    });\n  }\n  /**\n   * 弹出框模块\n   */\n  getBookUpdate(data) {\n    articleUpdate(data).then((res) => {\n      if (res.status == 200) {\n        message.success(\"修改成功\");\n        this.getBook(this.state.current, this.state.size); //获取列表接口\n      }\n    });\n  }\n  nameChange(event) {\n    this.setState({ name: event.target.value });\n  }\n  authorChange(event) {\n    this.setState({ author: event.target.value });\n  }\n  publishChange(event) {\n    this.setState({ publish: event.target.value });\n  }\n  priceChange(event) {\n    this.setState({ price: event.target.value });\n  }\n  //弹出框确定\n  handleOk() {\n    this.setState({\n      isModalVisible: false,\n    });\n    if (this.state.id) {\n      let data = {\n        id: this.state.id,\n        name: this.state.name,\n        author: this.state.author,\n        publish: this.state.publish,\n        price: this.state.price,\n      };\n      this.getBookUpdate(data);\n    } else {\n      let data = {\n        name: this.state.name,\n        author: this.state.author,\n        publish: this.state.publish,\n        price: this.state.price,\n      };\n      this.getAdd(data);\n    }\n  }\n  //弹出框取消\n  handleCancel() {\n    this.setState({\n      isModalVisible: false,\n      id: \"\",\n      name: \"\",\n      author: \"\",\n      publish: \"\",\n      price: \"\",\n    });\n  }\n}\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}