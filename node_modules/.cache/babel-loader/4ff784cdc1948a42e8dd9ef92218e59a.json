{"ast":null,"code":"var _jsxFileName = \"/Users/gaber/Documents/\\u7EC3\\u4E60/react-demo/src/pages/book/index.js\";\nimport \"./index.css\";\nimport React from \"react\";\nimport { articleList } from \"../../lib/api\";\nimport { Table, Input, Modal, Button, Popconfirm, Form } from \"antd\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Search\n} = Input;\nconst layout = {\n  labelCol: {\n    span: 4\n  },\n  wrapperCol: {\n    span: 16\n  }\n};\nconst tailLayout = {\n  wrapperCol: {\n    offset: 4,\n    span: 16\n  }\n};\n\nconst onSearch = value => {\n  console.log(value);\n};\n\nclass Index extends React.Component {\n  // 类名  继承  react组件\n  constructor(props) {\n    // 构造\n    super(props); // 调用父级方法\n\n    this.state = {\n      dataSource: [],\n      current: 1,\n      // 当前页\n      size: 5,\n      // 每页显示\n      total: 0,\n      // 总条数\n      showQuickJumper: true,\n      //是否点击跳转\n      isModalVisible: false,\n      setIsModalVisible: false,\n      columns: [{\n        title: \"ID\",\n        dataIndex: \"id\",\n        key: \"id\"\n      }, {\n        title: \"书名\",\n        dataIndex: \"name\",\n        key: \"name\"\n      }, {\n        title: \"作者\",\n        dataIndex: \"author\",\n        key: \"author\"\n      }, {\n        title: \"价格\",\n        dataIndex: \"price\",\n        key: \"price\"\n      }, {\n        title: \"操作\",\n        dataIndex: \"operation\",\n        render: (_, record) => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"edit\",\n            title: \"Sure to delete?\",\n            onClick: () => this.handleEdit(record),\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              children: \"\\u7F16\\u8F91\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Popconfirm, {\n            title: \"Sure to delete?\",\n            onConfirm: () => this.handleDelete(record.id),\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              children: \"\\u5220\\u9664\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this)\n      }]\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search\",\n        children: /*#__PURE__*/_jsxDEV(Search, {\n          placeholder: \"input search text\",\n          allowClear: true,\n          enterButton: \"Search\",\n          size: \"large\",\n          onSearch: onSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Table, {\n        rowKey: \"id\",\n        bordered: true,\n        dataSource: this.state.dataSource,\n        columns: this.state.columns,\n        pagination: this.fenye()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        okText: \"\\u786E\\u8BA4\",\n        cancelText: \"\\u53D6\\u6D88\",\n        title: \"\\u7F16\\u8F91\",\n        visible: this.state.isModalVisible,\n        onOk: () => this.handleOk(),\n        onCancel: () => this.handleCancel(),\n        children: /*#__PURE__*/_jsxDEV(Form, { ...layout,\n          name: \"basic\",\n          initialValues: {\n            remember: true\n          },\n          ref: \"form\",\n          onFinish: values => this.onAdd(values),\n          onFinishFailed: this.onFinishFailed,\n          children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n            label: \"\\u4E66\\u540D\",\n            name: \"name\",\n            rules: [{\n              required: true,\n              message: \"请输入用户名\"\n            }],\n            children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            label: \"\\u4F5C\\u8005\",\n            name: \"author\",\n            rules: [{\n              required: true,\n              message: \"请输入作者\"\n            }],\n            children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            label: \"\\u51FA\\u7248\\u793E\",\n            name: \"publish\",\n            rules: [{\n              required: true,\n              message: \"请输入出版社\"\n            }],\n            children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            label: \"\\u4EF7\\u683C\",\n            name: \"price\",\n            rules: [{\n              required: true,\n              message: \"请输入价格\"\n            }],\n            children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this);\n  }\n\n  componentDidMount() {\n    console.log(\"componentDidMount-----组件已经挂载到页面的时候\");\n    this.getBook(this.state.current, this.state.size); //获取列表接口\n  } //分页\n\n\n  fenye() {\n    const fy = {\n      current: this.state.current,\n      // 当前页\n      pageSize: this.state.size,\n      // 每页显示\n      total: this.state.total,\n      // 总条数\n      onChange: current => {\n        // 点击下一页\n        this.getBook(current, 5);\n        this.setState({\n          current: current\n        });\n      },\n      // 每页显示变化\n      onShowSizeChange: (Current, pageSize) => {\n        console.log(pageSize);\n        this.getBook(Current, pageSize);\n      },\n      showQuickJumper: this.state.showQuickJumper //是否可以跳转\n\n    };\n    return fy;\n  }\n\n  async getBook(current, size) {\n    let res = await articleList({\n      current: current,\n      size: size\n    });\n    console.log(33, res.content);\n\n    if (res.content.length) {\n      this.setState({\n        dataSource: res.content,\n        total: res.totalElements\n      });\n    }\n  } //删除\n\n\n  handleDelete(key) {\n    console.log(\"====================================\");\n    console.log(key);\n    console.log(\"====================================\"); // const dataSource = [...this.state.dataSource];\n    // this.setState({\n    //   dataSource: dataSource.filter((item) => item.key !== key),\n    // });\n  } //编辑\n\n\n  onAdd(values) {\n    this.state.list.push(values); // this.setState({\n    //   list: this.state.list,\n    // });\n    // if (values) {\n    //   this.refs.form.resetFields();\n    // }\n  }\n\n  onFinishFailed(errorInfo) {\n    console.log(\"Failed:\", errorInfo);\n  }\n\n  handleEdit(key) {\n    this.setState({\n      isModalVisible: true\n    });\n    console.log(\"====================================\");\n    console.log(key);\n    console.log(\"====================================\"); // const dataSource = [...this.state.dataSource];\n    // this.setState({\n    //   dataSource: dataSource.filter((item) => item.key !== key),\n    // });\n  }\n\n  handleOk() {\n    console.log(this.form);\n    this.setState({\n      isModalVisible: false\n    });\n  }\n\n  handleCancel() {\n    this.setState({\n      isModalVisible: false\n    });\n  }\n\n}\n\nexport default Index;","map":{"version":3,"sources":["/Users/gaber/Documents/练习/react-demo/src/pages/book/index.js"],"names":["React","articleList","Table","Input","Modal","Button","Popconfirm","Form","Search","layout","labelCol","span","wrapperCol","tailLayout","offset","onSearch","value","console","log","Index","Component","constructor","props","state","dataSource","current","size","total","showQuickJumper","isModalVisible","setIsModalVisible","columns","title","dataIndex","key","render","_","record","handleEdit","handleDelete","id","fenye","handleOk","handleCancel","remember","values","onAdd","onFinishFailed","required","message","componentDidMount","getBook","fy","pageSize","onChange","setState","onShowSizeChange","Current","res","content","length","totalElements","list","push","errorInfo","form"],"mappings":"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","sourcesContent":["import \"./index.css\";\nimport React from \"react\";\nimport { articleList } from \"../../lib/api\";\nimport { Table, Input, Modal, Button, Popconfirm, Form } from \"antd\";\nconst { Search } = Input;\nconst layout = {\n  labelCol: {\n    span: 4,\n  },\n  wrapperCol: {\n    span: 16,\n  },\n};\nconst tailLayout = {\n  wrapperCol: {\n    offset: 4,\n    span: 16,\n  },\n};\nconst onSearch = (value) => {\n  console.log(value);\n};\nclass Index extends React.Component {\n  // 类名  继承  react组件\n  constructor(props) {\n    // 构造\n    super(props); // 调用父级方法\n    this.state = {\n      dataSource: [],\n      current: 1, // 当前页\n      size: 5, // 每页显示\n      total: 0, // 总条数\n      showQuickJumper: true, //是否点击跳转\n      isModalVisible: false,\n      setIsModalVisible: false,\n      columns: [\n        {\n          title: \"ID\",\n          dataIndex: \"id\",\n          key: \"id\",\n        },\n        {\n          title: \"书名\",\n          dataIndex: \"name\",\n          key: \"name\",\n        },\n        {\n          title: \"作者\",\n          dataIndex: \"author\",\n          key: \"author\",\n        },\n        {\n          title: \"价格\",\n          dataIndex: \"price\",\n          key: \"price\",\n        },\n        {\n          title: \"操作\",\n          dataIndex: \"operation\",\n          render: (_, record) => (\n            <div>\n              <span className=\"edit\" title=\"Sure to delete?\" onClick={() => this.handleEdit(record)}>\n                <a>编辑</a>\n              </span>\n              <Popconfirm title=\"Sure to delete?\" onConfirm={() => this.handleDelete(record.id)}>\n                <a>删除</a>\n              </Popconfirm>\n            </div>\n          ),\n        },\n      ],\n    };\n  }\n  render() {\n    return (\n      <div>\n        {/* 表头 */}\n        <div className=\"search\">\n          <Search placeholder=\"input search text\" allowClear enterButton=\"Search\" size=\"large\" onSearch={onSearch} />\n        </div>\n        <Table rowKey=\"id\" bordered dataSource={this.state.dataSource} columns={this.state.columns} pagination={this.fenye()} />\n\n        <Modal okText=\"确认\" cancelText=\"取消\" title=\"编辑\" visible={this.state.isModalVisible} onOk={() => this.handleOk()} onCancel={() => this.handleCancel()}>\n          <Form\n            {...layout}\n            name=\"basic\"\n            initialValues={{\n              remember: true,\n            }}\n            ref=\"form\"\n            onFinish={(values) => this.onAdd(values)}\n            onFinishFailed={this.onFinishFailed}\n          >\n            <Form.Item\n              label=\"书名\"\n              name=\"name\"\n              rules={[\n                {\n                  required: true,\n                  message: \"请输入用户名\",\n                },\n              ]}\n            >\n              <Input />\n            </Form.Item>\n\n            <Form.Item\n              label=\"作者\"\n              name=\"author\"\n              rules={[\n                {\n                  required: true,\n                  message: \"请输入作者\",\n                },\n              ]}\n            >\n              <Input />\n            </Form.Item>\n            <Form.Item\n              label=\"出版社\"\n              name=\"publish\"\n              rules={[\n                {\n                  required: true,\n                  message: \"请输入出版社\",\n                },\n              ]}\n            >\n              <Input />\n            </Form.Item>\n            <Form.Item\n              label=\"价格\"\n              name=\"price\"\n              rules={[\n                {\n                  required: true,\n                  message: \"请输入价格\",\n                },\n              ]}\n            >\n              <Input />\n            </Form.Item>\n\n          </Form>\n        </Modal>\n      </div>\n    );\n  }\n  componentDidMount() {\n    console.log(\"componentDidMount-----组件已经挂载到页面的时候\");\n    this.getBook(this.state.current, this.state.size); //获取列表接口\n  }\n  //分页\n  fenye() {\n    const fy = {\n      current: this.state.current, // 当前页\n      pageSize: this.state.size, // 每页显示\n      total: this.state.total, // 总条数\n      onChange: (current) => {\n        // 点击下一页\n        this.getBook(current, 5);\n        this.setState({\n          current: current,\n        });\n      },\n      // 每页显示变化\n      onShowSizeChange: (Current, pageSize) => {\n        console.log(pageSize);\n        this.getBook(Current, pageSize);\n      },\n      showQuickJumper: this.state.showQuickJumper, //是否可以跳转\n    };\n    return fy;\n  }\n  async getBook(current, size) {\n    let res = await articleList({ current: current, size: size });\n    console.log(33, res.content);\n    if (res.content.length) {\n      this.setState({\n        dataSource: res.content,\n        total: res.totalElements,\n      });\n    }\n  }\n  //删除\n  handleDelete(key) {\n    console.log(\"====================================\");\n    console.log(key);\n    console.log(\"====================================\");\n    // const dataSource = [...this.state.dataSource];\n    // this.setState({\n    //   dataSource: dataSource.filter((item) => item.key !== key),\n    // });\n  }\n  //编辑\n  onAdd(values) {\n    this.state.list.push(values);\n    // this.setState({\n    //   list: this.state.list,\n    // });\n    // if (values) {\n    //   this.refs.form.resetFields();\n    // }\n  }\n  onFinishFailed(errorInfo) {\n    console.log(\"Failed:\", errorInfo);\n  }\n  handleEdit(key) {\n    this.setState({\n      isModalVisible: true,\n    });\n    console.log(\"====================================\");\n    console.log(key);\n    console.log(\"====================================\");\n    // const dataSource = [...this.state.dataSource];\n    // this.setState({\n    //   dataSource: dataSource.filter((item) => item.key !== key),\n    // });\n  }\n  handleOk() {\n    console.log(this.form);\n    this.setState({\n      isModalVisible: false,\n    });\n  }\n\n  handleCancel() {\n    this.setState({\n      isModalVisible: false,\n    });\n  }\n}\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}