{"ast":null,"code":"import _objectSpread from\"/Users/gaber/Documents/\\u7EC3\\u4E60/react-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/gaber/Documents/\\u7EC3\\u4E60/react-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/gaber/Documents/\\u7EC3\\u4E60/react-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/gaber/Documents/\\u7EC3\\u4E60/react-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/gaber/Documents/\\u7EC3\\u4E60/react-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from\"react\";import{BrowserRouter as Router,Route,Link}from\"react-router-dom\";import\"./index.scss\";import PracticeItem from\"./component/practiceItem\";import{articleAdd}from\"../../lib/api\";import{CSSTransition,TransitionGroup}from\"react-transition-group\";import{Form,Input,Button,message}from\"antd\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var layout={labelCol:{span:2},wrapperCol:{span:16}};var tailLayout={wrapperCol:{offset:2,span:16}};var Practice=/*#__PURE__*/function(_Component){_inherits(Practice,_Component);var _super=_createSuper(Practice);// 类名  继承  react组件\nfunction Practice(props){var _this;_classCallCheck(this,Practice);// 构造\n_this=_super.call(this,props);// 调用父级方法\n_this.state={list:[]};return _this;}// componentWillMount () {\n//   console.log('componentWillMount-----组件将要挂载到页面的时候')\n// }\n// shouldComponentUpdate (nextProps, nextState) {\n//   console.log('shouldComponentUpdate-----组件更新之前  1')\n//   return true\n// }\n// componentWillUpdate () {\n//   console.log('componentWillUpdate-----组件更新之前  2')\n// }\n_createClass(Practice,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Form,_objectSpread(_objectSpread({},layout),{},{name:\"basic\",initialValues:{remember:true},ref:\"form\",onFinish:function onFinish(values){return _this2.onAdd(values);},onFinishFailed:this.onFinishFailed,children:[/*#__PURE__*/_jsx(Form.Item,{label:\"\\u4E66\\u540D\",name:\"name\",rules:[{required:true,message:\"请输入用户名\"}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{label:\"\\u4F5C\\u8005\",name:\"author\",rules:[{required:true,message:\"请输入作者\"}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{label:\"\\u51FA\\u7248\\u793E\",name:\"publish\",rules:[{required:true,message:\"请输入出版社\"}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{label:\"\\u4EF7\\u683C\",name:\"price\",rules:[{required:true,message:\"请输入价格\"}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{name:\"content\",label:\"\\u5185\\u5BB9\",children:/*#__PURE__*/_jsx(Input.TextArea,{rows:10})}),/*#__PURE__*/_jsx(Form.Item,_objectSpread(_objectSpread({},tailLayout),{},{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",children:\"\\u65B0\\u589E\"})}))]}))}),/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsx(TransitionGroup,{children:this.state.list.map(function(item,index){return/*#__PURE__*/_jsx(CSSTransition,{timeout:10,unmountOnExit:true,appear:true,children:/*#__PURE__*/_jsx(PracticeItem,{content:item,index:index,delItem:function delItem(){_this2.delItem(index);}},index)},index);})})})]});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){console.log(\"componentDidUpdate-----所有挂载完毕执行   4\");}},{key:\"componentDidMount\",value:function componentDidMount(){console.log(\"componentDidMount-----组件已经挂载到页面的时候\");}//新增\n},{key:\"onAdd\",value:function onAdd(values){this.state.list.push(values);this.getAdd(values);this.setState({list:this.state.list});if(values){this.refs.form.resetFields();}}},{key:\"getAdd\",value:function getAdd(data){var _this3=this;articleAdd(data).then(function(res){if(res.status==200){message.success(\"新增成功\");setTimeout(function(){_this3.props.history.push(\"/book\");},1000);}});}},{key:\"onFinishFailed\",value:function onFinishFailed(errorInfo){console.log(\"Failed:\",errorInfo);}//删除\n},{key:\"delItem\",value:function delItem(index){// 数据操作必须重新赋值操作，不能直接改变state里面的数据\nvar list=this.state.list;list.splice(index,1);this.setState({list:list});}}]);return Practice;}(Component);export default Practice;","map":{"version":3,"sources":["/Users/gaber/Documents/练习/react-demo/src/pages/practice/index.js"],"names":["React","Component","Fragment","BrowserRouter","Router","Route","Link","PracticeItem","articleAdd","CSSTransition","TransitionGroup","Form","Input","Button","message","layout","labelCol","span","wrapperCol","tailLayout","offset","Practice","props","state","list","remember","values","onAdd","onFinishFailed","required","map","item","index","delItem","console","log","push","getAdd","setState","refs","form","resetFields","data","then","res","status","success","setTimeout","history","errorInfo","splice"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport \"./index.scss\";\nimport PracticeItem from \"./component/practiceItem\";\nimport { articleAdd } from \"../../lib/api\";\n\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\nimport { Form, Input, Button, message } from \"antd\";\nconst layout = {\n  labelCol: {\n    span: 2,\n  },\n  wrapperCol: {\n    span: 16,\n  },\n};\nconst tailLayout = {\n  wrapperCol: {\n    offset: 2,\n    span: 16,\n  },\n};\n\nclass Practice extends Component {\n  // 类名  继承  react组件\n  constructor(props) {\n    // 构造\n    super(props); // 调用父级方法\n    this.state = {\n      list: [],\n    };\n  }\n\n  // componentWillMount () {\n  //   console.log('componentWillMount-----组件将要挂载到页面的时候')\n  // }\n\n  // shouldComponentUpdate (nextProps, nextState) {\n  //   console.log('shouldComponentUpdate-----组件更新之前  1')\n  //   return true\n  // }\n\n  // componentWillUpdate () {\n  //   console.log('componentWillUpdate-----组件更新之前  2')\n  // }\n\n  render() {\n    return (\n      <Fragment>\n        {/* 外层类似vue必须加一层盒子，但是加了这个就可以不用增加额外盒子 */}\n        {/* 绑定事件必须要.bind(this)进去，或者使用箭头函数，不然无法找到this */}\n        <div>\n          <Form\n            {...layout}\n            name=\"basic\"\n            initialValues={{\n              remember: true,\n            }}\n            ref=\"form\"\n            onFinish={(values) => this.onAdd(values)}\n            onFinishFailed={this.onFinishFailed}\n          >\n            <Form.Item\n              label=\"书名\"\n              name=\"name\"\n              rules={[\n                {\n                  required: true,\n                  message: \"请输入用户名\",\n                },\n              ]}\n            >\n              <Input />\n            </Form.Item>\n            <Form.Item\n              label=\"作者\"\n              name=\"author\"\n              rules={[\n                {\n                  required: true,\n                  message: \"请输入作者\",\n                },\n              ]}\n            >\n              <Input />\n            </Form.Item>\n            <Form.Item\n              label=\"出版社\"\n              name=\"publish\"\n              rules={[\n                {\n                  required: true,\n                  message: \"请输入出版社\",\n                },\n              ]}\n            >\n              <Input />\n            </Form.Item>\n            <Form.Item\n              label=\"价格\"\n              name=\"price\"\n              rules={[\n                {\n\n                  required: true,\n                  message: \"请输入价格\",\n                },\n              ]}\n            >\n              <Input />\n            </Form.Item>\n            <Form.Item name=\"content\" label=\"内容\">\n              <Input.TextArea rows={10} />\n            </Form.Item>\n            <Form.Item {...tailLayout}>\n              <Button type=\"primary\" htmlType=\"submit\">\n                新增\n              </Button>\n            </Form.Item>\n          </Form>\n        </div>\n        <ul>\n          <TransitionGroup>\n            {this.state.list.map((item, index) => {\n              return (\n                <CSSTransition timeout={10} unmountOnExit appear={true} key={index}>\n                  <PracticeItem\n                    key={index}\n                    content={item}\n                    index={index}\n                    delItem={() => {\n                      this.delItem(index);\n                    }}\n                  />\n                </CSSTransition>\n              );\n            })}\n          </TransitionGroup>\n        </ul>\n      </Fragment>\n    );\n  }\n\n  componentDidUpdate() {\n    console.log(\"componentDidUpdate-----所有挂载完毕执行   4\");\n  }\n\n  componentDidMount() {\n    console.log(\"componentDidMount-----组件已经挂载到页面的时候\");\n  }\n  //新增\n  onAdd(values) {\n    this.state.list.push(values);\n    this.getAdd(values);\n    this.setState({\n      list: this.state.list,\n    });\n    if (values) {\n      this.refs.form.resetFields();\n    }\n  }\n  getAdd(data) {\n    articleAdd(data).then((res) => {\n      if (res.status == 200) {\n        message.success(\"新增成功\");\n        setTimeout(() => {\n          this.props.history.push(\"/book\");\n        }, 1000);\n      }\n    });\n  }\n  onFinishFailed(errorInfo) {\n    console.log(\"Failed:\", errorInfo);\n  }\n  //删除\n  delItem(index) {\n    // 数据操作必须重新赋值操作，不能直接改变state里面的数据\n    let list = this.state.list;\n    list.splice(index, 1);\n    this.setState({\n      list: list,\n    });\n  }\n}\n\nexport default Practice;\n"]},"metadata":{},"sourceType":"module"}