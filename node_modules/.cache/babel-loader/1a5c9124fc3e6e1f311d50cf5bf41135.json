{"ast":null,"code":"var _jsxFileName = \"/Users/gaber/Documents/\\u7EC3\\u4E60/react-demo/src/pages/book/index.js\";\nimport \"./index.css\";\nimport React from \"react\";\nimport { articleList, articleAdd, articleUpdate } from \"../../lib/api\";\nimport { Table, Input, Modal, Popconfirm, Row, Col, Button, message } from \"antd\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Search\n} = Input;\n\nconst onSearch = value => {\n  console.log(value);\n};\n\nclass Index extends React.Component {\n  // 类名  继承  react组件\n  constructor(props) {\n    // 构造\n    super(props); // 调用父级方法\n\n    this.state = {\n      dataSource: [],\n      current: 1,\n      // 当前页\n      size: 10,\n      // 每页显示\n      total: 0,\n      // 总条数\n      showQuickJumper: true,\n      //是否点击跳转\n      isModalVisible: false,\n      setIsModalVisible: false,\n      columns: [{\n        title: \"ID\",\n        dataIndex: \"id\",\n        key: \"id\"\n      }, {\n        title: \"书名\",\n        dataIndex: \"name\",\n        key: \"name\",\n        render: (_, record) => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"edit\",\n            onClick: () => this.handleDetail(record.id),\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              children: record.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 36,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 35,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 13\n        }, this)\n      }, {\n        title: \"作者\",\n        dataIndex: \"author\",\n        key: \"author\"\n      }, {\n        title: \"出版社\",\n        dataIndex: \"publish\",\n        key: \"publish\"\n      }, {\n        title: \"价格\",\n        dataIndex: \"price\",\n        key: \"price\"\n      }, {\n        title: \"操作\",\n        dataIndex: \"operation\",\n        render: (_, record) => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"edit\",\n            onClick: () => this.handleEdit(record),\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              children: \"\\u7F16\\u8F91\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Popconfirm, {\n            title: \"\\u786E\\u5B9A\\u5220\\u9664\\u5417?\",\n            okText: \"\\u786E\\u8BA4\",\n            cancelText: \"\\u53D6\\u6D88\",\n            onConfirm: () => this.handleDelete(record.id),\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              children: \"\\u5220\\u9664\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this)\n      }],\n      //编辑\n      id: \"\",\n      name: \"\",\n      author: \"\",\n      publish: \"\",\n      price: \"\",\n      //公共\n      title: \"新增\"\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search\",\n        children: [/*#__PURE__*/_jsxDEV(Search, {\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u4E66\\u540D\",\n          allowClear: true,\n          enterButton: \"\\u641C\\u7D22\",\n          onSearch: onSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: \"btn\",\n          type: \"primary\",\n          onClick: () => this.handleAdd(),\n          children: \"\\u65B0\\u589E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Table, {\n        rowKey: \"id\",\n        bordered: true,\n        dataSource: this.state.dataSource,\n        columns: this.state.columns,\n        pagination: this.fenye()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        okText: \"\\u786E\\u8BA4\",\n        cancelText: \"\\u53D6\\u6D88\",\n        title: this.state.title,\n        visible: this.state.isModalVisible,\n        onOk: () => this.handleOk(),\n        onCancel: () => this.handleCancel(),\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            span: 4,\n            children: \"\\u4E66\\u540D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            span: 16,\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"\\u4E66\\u540D\",\n              value: this.state.name,\n              onChange: () => this.nameChange(event)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            span: 4,\n            children: \"\\u4F5C\\u8005\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            span: 16,\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"\\u4F5C\\u8005\",\n              value: this.state.author,\n              onChange: () => this.authorChange(event)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            span: 4,\n            children: \"\\u51FA\\u7248\\u793E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            span: 16,\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"\\u51FA\\u7248\\u793E\",\n              value: this.state.publish,\n              onChange: () => this.publishChange(event)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            span: 4,\n            children: \"\\u4EF7\\u683C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            span: 16,\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"\\u4EF7\\u683C\",\n              value: this.state.price,\n              onChange: () => this.priceChange(event)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this);\n  }\n\n  componentDidMount() {\n    console.log(\"componentDidMount-----组件已经挂载到页面的时候\");\n    this.getBook(this.state.current, this.state.size); //获取列表接口\n  } //分页\n\n\n  fenye() {\n    const fy = {\n      current: this.state.current,\n      // 当前页\n      pageSize: this.state.size,\n      // 每页显示\n      total: this.state.total,\n      // 总条数\n      onChange: current => {\n        // 点击下一页\n        this.setState({\n          current: current\n        });\n        this.getBook(current, 10);\n      },\n      // 每页显示变化\n      onShowSizeChange: (Current, pageSize) => {\n        console.log(pageSize);\n        this.getBook(Current, pageSize);\n      },\n      showQuickJumper: this.state.showQuickJumper //是否可以跳转\n\n    };\n    return fy;\n  } //列表接口\n\n\n  async getBook(current, size) {\n    let res = await articleList({\n      current: current,\n      size: size\n    });\n    console.log(33, res.data.content);\n\n    if (res.data.content.length) {\n      this.setState({\n        dataSource: res.data.content,\n        total: res.data.totalElements\n      });\n    }\n  } //删除\n\n\n  handleDelete(key) {\n    console.log(\"====================================\");\n    console.log(key);\n    console.log(\"====================================\"); // const dataSource = [...this.state.dataSource];\n    // this.setState({\n    //   dataSource: dataSource.filter((item) => item.key !== key),\n    // });\n  }\n  /**\n   * 新增模块\n   */\n\n\n  handleAdd() {\n    this.setState({\n      isModalVisible: true,\n      title: \"新增\"\n    });\n  } //新增接口\n\n\n  getAdd(data) {\n    articleAdd(data).then(res => {\n      if (res.status == 200) {\n        message.success(\"新增成功\");\n        this.getBook(this.state.current, this.state.size); //获取列表接口\n      }\n    });\n  }\n  /**\n   * 详情模块\n   */\n\n\n  handleDetail(id) {\n    this.props.history.push({\n      pathname: `/bookDetail`,\n      state: {\n        id: id\n      }\n    });\n  }\n  /**\n   * 编辑模块\n   */\n\n\n  handleEdit(key) {\n    this.setState({\n      isModalVisible: true,\n      title: \"编辑\",\n      id: key.id,\n      name: key.name,\n      author: key.author,\n      publish: key.publish,\n      price: key.price\n    });\n  }\n  /**\n   * 弹出框模块\n   */\n\n\n  getBookUpdate(data) {\n    articleUpdate(data).then(res => {\n      if (res.status == 200) {\n        this.getBook(this.state.current, this.state.size); //获取列表接口\n      }\n    });\n  }\n\n  nameChange(event) {\n    this.setState({\n      name: event.target.value\n    });\n  }\n\n  authorChange(event) {\n    this.setState({\n      author: event.target.value\n    });\n  }\n\n  publishChange(event) {\n    this.setState({\n      publish: event.target.value\n    });\n  }\n\n  priceChange(event) {\n    this.setState({\n      price: event.target.value\n    });\n  } //弹出框确定\n\n\n  handleOk() {\n    this.setState({\n      isModalVisible: false\n    });\n\n    if (this.state.id) {\n      let data = {\n        id: this.state.id,\n        name: this.state.name,\n        author: this.state.author,\n        publish: this.state.publish,\n        price: this.state.price\n      };\n      this.getBookUpdate(data);\n    } else {\n      let data = {\n        name: this.state.name,\n        author: this.state.author,\n        publish: this.state.publish,\n        price: this.state.price\n      };\n      this.getAdd(data);\n    }\n  } //弹出框取消\n\n\n  handleCancel() {\n    this.setState({\n      isModalVisible: false,\n      id: \"\",\n      name: \"\",\n      author: \"\",\n      publish: \"\",\n      price: \"\"\n    });\n  }\n\n}\n\nexport default Index;","map":{"version":3,"sources":["/Users/gaber/Documents/练习/react-demo/src/pages/book/index.js"],"names":["React","articleList","articleAdd","articleUpdate","Table","Input","Modal","Popconfirm","Row","Col","Button","message","Search","onSearch","value","console","log","Index","Component","constructor","props","state","dataSource","current","size","total","showQuickJumper","isModalVisible","setIsModalVisible","columns","title","dataIndex","key","render","_","record","handleDetail","id","name","handleEdit","handleDelete","author","publish","price","handleAdd","fenye","handleOk","handleCancel","nameChange","event","authorChange","publishChange","priceChange","componentDidMount","getBook","fy","pageSize","onChange","setState","onShowSizeChange","Current","res","data","content","length","totalElements","getAdd","then","status","success","history","push","pathname","getBookUpdate","target"],"mappings":"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","sourcesContent":["import \"./index.css\";\nimport React from \"react\";\nimport { articleList, articleAdd, articleUpdate } from \"../../lib/api\";\nimport { Table, Input, Modal, Popconfirm, Row, Col, Button, message } from \"antd\";\nconst { Search } = Input;\n\nconst onSearch = (value) => {\n  console.log(value);\n};\nclass Index extends React.Component {\n  // 类名  继承  react组件\n  constructor(props) {\n    // 构造\n    super(props); // 调用父级方法\n    this.state = {\n      dataSource: [],\n      current: 1, // 当前页\n      size: 10, // 每页显示\n      total: 0, // 总条数\n      showQuickJumper: true, //是否点击跳转\n      isModalVisible: false,\n      setIsModalVisible: false,\n      columns: [\n        {\n          title: \"ID\",\n          dataIndex: \"id\",\n          key: \"id\",\n        },\n        {\n          title: \"书名\",\n          dataIndex: \"name\",\n          key: \"name\",\n          render: (_, record) => (\n            <div>\n              <span className=\"edit\" onClick={() => this.handleDetail(record.id)}>\n                <a>{record.name}</a>\n              </span>\n            </div>\n          ),\n        },\n        {\n          title: \"作者\",\n          dataIndex: \"author\",\n          key: \"author\",\n        },\n        {\n          title: \"出版社\",\n          dataIndex: \"publish\",\n          key: \"publish\",\n        },\n        {\n          title: \"价格\",\n          dataIndex: \"price\",\n          key: \"price\",\n        },\n        {\n          title: \"操作\",\n          dataIndex: \"operation\",\n          render: (_, record) => (\n            <div>\n              <span className=\"edit\" onClick={() => this.handleEdit(record)}>\n                <a>编辑</a>\n              </span>\n              <Popconfirm title=\"确定删除吗?\" okText=\"确认\" cancelText=\"取消\" onConfirm={() => this.handleDelete(record.id)}>\n                <a>删除</a>\n              </Popconfirm>\n            </div>\n          ),\n        },\n      ],\n      //编辑\n      id: \"\",\n      name: \"\",\n      author: \"\",\n      publish: \"\",\n      price: \"\",\n      //公共\n      title: \"新增\",\n    };\n  }\n  render() {\n    return (\n      <div>\n        {/* 表头 */}\n        <div className=\"search\">\n          <Search placeholder=\"请输入书名\" allowClear enterButton=\"搜索\" onSearch={onSearch} />\n          <Button className=\"btn\" type=\"primary\" onClick={() => this.handleAdd()}>\n            新增\n          </Button>\n        </div>\n        <Table rowKey=\"id\" bordered dataSource={this.state.dataSource} columns={this.state.columns} pagination={this.fenye()} />\n\n        <Modal okText=\"确认\" cancelText=\"取消\" title={this.state.title} visible={this.state.isModalVisible} onOk={() => this.handleOk()} onCancel={() => this.handleCancel()}>\n          <Row className=\"row\">\n            <Col span={4}>书名</Col>\n            <Col span={16}>\n              <Input placeholder=\"书名\" value={this.state.name} onChange={() => this.nameChange(event)} />\n            </Col>\n          </Row>\n          <Row className=\"row\">\n            <Col span={4}>作者</Col>\n            <Col span={16}>\n              <Input placeholder=\"作者\" value={this.state.author} onChange={() => this.authorChange(event)} />\n            </Col>\n          </Row>\n          <Row className=\"row\">\n            <Col span={4}>出版社</Col>\n            <Col span={16}>\n              <Input placeholder=\"出版社\" value={this.state.publish} onChange={() => this.publishChange(event)} />\n            </Col>\n          </Row>\n          <Row className=\"row\">\n            <Col span={4}>价格</Col>\n            <Col span={16}>\n              <Input placeholder=\"价格\" value={this.state.price} onChange={() => this.priceChange(event)} />\n            </Col>\n          </Row>\n        </Modal>\n      </div>\n    );\n  }\n  componentDidMount() {\n    console.log(\"componentDidMount-----组件已经挂载到页面的时候\");\n    this.getBook(this.state.current, this.state.size); //获取列表接口\n  }\n  //分页\n  fenye() {\n    const fy = {\n      current: this.state.current, // 当前页\n      pageSize: this.state.size, // 每页显示\n      total: this.state.total, // 总条数\n      onChange: (current) => {\n        // 点击下一页\n        this.setState({\n          current: current,\n        });\n        this.getBook(current, 10);\n      },\n      // 每页显示变化\n      onShowSizeChange: (Current, pageSize) => {\n        console.log(pageSize);\n        this.getBook(Current, pageSize);\n      },\n      showQuickJumper: this.state.showQuickJumper, //是否可以跳转\n    };\n    return fy;\n  }\n  //列表接口\n  async getBook(current, size) {\n    let res = await articleList({ current: current, size: size });\n    console.log(33, res.data.content);\n    if (res.data.content.length) {\n      this.setState({\n        dataSource: res.data.content,\n        total: res.data.totalElements,\n      });\n    }\n  }\n  //删除\n  handleDelete(key) {\n    console.log(\"====================================\");\n    console.log(key);\n    console.log(\"====================================\");\n    // const dataSource = [...this.state.dataSource];\n    // this.setState({\n    //   dataSource: dataSource.filter((item) => item.key !== key),\n    // });\n  }\n  /**\n   * 新增模块\n   */\n  handleAdd() {\n    this.setState({\n      isModalVisible: true,\n      title: \"新增\",\n    });\n  }\n  //新增接口\n  getAdd(data) {\n    articleAdd(data).then((res) => {\n      if (res.status == 200) {\n        message.success(\"新增成功\");\n        this.getBook(this.state.current, this.state.size); //获取列表接口\n      }\n    });\n  }\n  /**\n   * 详情模块\n   */\n  handleDetail(id) {\n    this.props.history.push({ pathname: `/bookDetail`, state: { id: id } });\n  }\n  /**\n   * 编辑模块\n   */\n  handleEdit(key) {\n    this.setState({\n      isModalVisible: true,\n      title: \"编辑\",\n      id: key.id,\n      name: key.name,\n      author: key.author,\n      publish: key.publish,\n      price: key.price,\n    });\n  }\n  /**\n   * 弹出框模块\n   */\n  getBookUpdate(data) {\n    articleUpdate(data).then((res) => {\n      if(res.status == 200){\n         this.getBook(this.state.current, this.state.size); //获取列表接口\n      }\n     \n    });\n  }\n  nameChange(event) {\n    this.setState({ name: event.target.value });\n  }\n  authorChange(event) {\n    this.setState({ author: event.target.value });\n  }\n  publishChange(event) {\n    this.setState({ publish: event.target.value });\n  }\n  priceChange(event) {\n    this.setState({ price: event.target.value });\n  }\n  //弹出框确定\n  handleOk() {\n    this.setState({\n      isModalVisible: false,\n    });\n    if (this.state.id) {\n      let data = {\n        id: this.state.id,\n        name: this.state.name,\n        author: this.state.author,\n        publish: this.state.publish,\n        price: this.state.price,\n      };\n      this.getBookUpdate(data);\n    } else {\n      let data = {\n        name: this.state.name,\n        author: this.state.author,\n        publish: this.state.publish,\n        price: this.state.price,\n      };\n      this.getAdd(data);\n    }\n  }\n  //弹出框取消\n  handleCancel() {\n    this.setState({\n      isModalVisible: false,\n      id: \"\",\n      name: \"\",\n      author: \"\",\n      publish: \"\",\n      price: \"\",\n    });\n  }\n}\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}